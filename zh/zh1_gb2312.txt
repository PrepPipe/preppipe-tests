【章节：zh1】# 避免比较结果时由于文件名不一致导致错误
你好，世界！

这是语涵编译器原型的样例文本其一，基础剧本格式说明。

一般这样不带特殊格式的文本都会被作为旁白的发言。空行会被忽略。大部分的段落设置（包括段首缩进等）都会被忽略。

发言有三种格式，除了第一种这样没有引号、没有指定发言者的外：

“第二种发言是会将发言内容用引号引起来的。这样的发言会被视为是最后一个发言的人说的。”

“如果像现在这样之前没有指定过谁说话，那么仍然视为旁白发言。”

语涵：第三种发言则是像这样，段首有指定发言者，接下来的文本则是发言内容。

语涵：第三种发言有如下变种格式：

语涵（微笑）：这是发言1
语涵：“这是发言2”
语涵：“这是发言3，”这段文本会被忽略，“这是发言3的后半部分”
语涵【这是发言4】
“语涵”这是发言5
【语涵】这是发言6
【语涵】（微笑）这是发言7
【语涵】“这是发言8，”这段文本会被忽略，“这是发言8的后半部分”
【语涵】（微笑）：这是发言9
【语涵】：（微笑）这是发言10

以及以上格式变种的排列组合。空格可有可无。语涵编译器仍然采用按行解析（在文档中等效于按段落解析）的模式，所以每个段落只能有一种含义，比如这一段就是第一种发言，后面即使再接【语涵】这是发言，内容也会视为发言内容。

注意，如果像[]，【】，（）这种符号在文中出现，如果符号出现的段落中之前的文本不带任何标点符号，那么这些文本有可能会被当作角色名，比如：

虽然这句句子很长但是因为没有标点符号所以这些话会被当做一个人名然后【这些内容会被当做发言内容】

除发言外，其他功能都需要命令来做。为了避免误将内容认作命令，所有的命令都需要在“命令段”中。命令段包含如下形式：

【单个命令】
【命令1】【命令2】
【#注释掉的命令】【命令】# 段后注释

及其变体。【】与[]不作区分，半角#与全角#不作区分。行首必须是”【”或”[“，每个命令都被方括号包裹。所有命令之后可以用 # 追加注释，单个命令也可以在方括号开始处加#来注释掉（使其不起作用）。为了同时支持命令段与使用【】的发言，如果整段内容不能以命令段的方式解析，语涵编译器仍会将其当作发言段。

如果要专门添加注释（语涵编译器会忽略其内容），可以使用如下形式：
【】# 这是注释
【注释：这也是注释】

每个命令在方括号内的格式如下：
【命令名：按位参数，参数1=值1，参数2=“值2”】# 推荐形式
【命令名  按位参数  参数1=值1  参数2=“值2”】# 使用空格进行分隔
【“命令名”：参数】# 使用引号包裹命令名

比如：
【设置背景音乐：”Gymnopedie No 1”】# 值包含空格等字符时需要引号
【切换场景：走廊】
【声明别名：语涵，目标=苏语涵】# 可以在发言时使用“语涵”来指代“苏语涵”


如果命令至少支持一个参数，则其支持的第一个参数可以不写参数名（即使用按位参数传递）。语涵编译器不支持多个按位参数，多个其他所有参数在传递时需要指定参数名。比如以上命令，
把参数名写全是这样的：

【设置背景音乐：音乐=”Gymnopedie No 1”】
【切换场景：场景=走廊】
【声明别名：别名名称=语涵，目标=苏语涵】


为了便于移植其他文本，语涵编译器目前有三种发言模式，以上都是默认模式。

【长发言：语涵】

在长发言模式下，所有的除命令段之外的内容都将被当作指定发言者（语涵）所说的话。像这样本来是旁白说的话也会被作为指定发言者的话。

“这样用括号引起来的也是。”

【即使是这样的内容】也会被作为发言内容。

【默认发言模式】# 可以回到默认状态

还有一种模式用来支持部分对话场景：

【交替发言：语涵，语泉】

这句话是旁白说的。不指定发言者、没有引号的发言内容不受影响，不过对带有引号的内容：

“这句话是语涵说的。”
“这句话是语泉说的。”
“所有用引号引起来的话将会在指定的发言者们之中轮换。这句是语涵说的。”
语涵：也可以像这样穿插指定发言者，这样这一句是语涵说的，下一句又是语泉说的。
“这句话是语泉说的。”

【默认发言模式】# 回到默认状态

感谢你能够阅读到这里，下个样例再见。
